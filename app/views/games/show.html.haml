- set_meta_tags title: t("game.game_id", id: @game.id)

.row
  %div{class: center(xl: 4, lg: 6, md: 8, sm: 10)}
    %table{class: "table table-bordered table-sm mt-3"}
      %thead
        %tr
          %th.text-center{colspan: 2}= t("game.game_id", id: @game.id)
      %tbody
        %tr
          %td= t("game.started_at")
          %td= @game.created_at.strftime("%Y-%m-%d %H:%M:%S")
        %tr
          %td= t("game.started_by")
          %td= @game.user.handle
        %tr
          %td= t("game.state.state")
          %td= t("game.state.#{@game.state}")
        %tr
          %td
            = t("game.players")
            = precede("(") do
              = succeed(")") do
                = @game.participants
          %td= @game.players.map { |p| p.user.handle }.join(", ")
        %tr
          %td= t("game.dealt")
          %td= @game.total_dealt
        %tr
          %td= t("game.messages")
          %td= @game.messages.count

.row
  %div{class: center(xl: 8, md: 10)}
    %table{class: "table table-bordered table-striped table-sm mt-3"}
      %thead
        %tr
          %th.text-center{colspan: 5}= t("game.messages")
        %tr
          %th.text-center= t("id")
          %th= t("game.player")
          %th.text-center= t("game.sent")
          %th.text-center= t("created")
          %th= t("data")
      %tbody
        - @game.messages.each do |m|
          %tr
            %td.text-center= m.id
            %td
              = m.player.user.handle
              = "*" if m.broadcast
            %td.text-center= m.sent
            %td.text-center= m.created_at.strftime("%H:%M:%S")
            %td= m.json
