
var skyjo = (function() {

  var user_id = <%= current_user.id %>;
  var data = {
    user_id: user_id,
    message: 'initialize'
  };

  function poll() {
    $.ajax('/ping.json', {

      data: data,

      dataType: 'json',

      success: function(json, status, xhr) {
        $('#responses').append('<pre>' + xhr.responseText + '</pre>');
      },

      error: function(xhr) {
        $('#responses').append('<pre>' + xhr.status + '</pre>');
      },

      complete: function(xhr) {
        setTimeout(poll, 10000);
      }

    });
  }

  return {
    poll: poll
  };

})();

$(function() {
  skyjo.poll();
});
